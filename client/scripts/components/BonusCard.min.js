import account from"../accounts.js";import{stringifyBonus}from"../../database/stringify.js";import getBonusPartLabel from"../utilities/get-bonus-part-label.js";import QuestionCard from"./QuestionCard.min.js";export default function BonusCard({bonus:a,highlightedBonus:b,hideAnswerlines:c,hideCardFooter:d,topRightComponent:e,fontSize:f=16}){const g=a._id,h=a.parts.length,j=[];for(let g=0;g<h;g++)j.push(g);return/*#__PURE__*/React.createElement(QuestionCard,{onClickHeader:function(){const b=stringifyBonus(a);navigator.clipboard.writeText(b);const c=new bootstrap.Toast(document.getElementById("clipboard-toast"));c.show()},question:a,topRightComponent:e},/*#__PURE__*/React.createElement("div",{className:"card-body",style:{fontSize:`${f}px`}},/*#__PURE__*/React.createElement("span",{style:{fontWeight:"<b>"===a.leadin.substring(0,3)?"bold":"normal"}},a.number,". "),/*#__PURE__*/React.createElement("span",{dangerouslySetInnerHTML:{__html:b.leadin}}),j.map(d=>/*#__PURE__*/React.createElement("div",{key:`${a._id}-${d}`},/*#__PURE__*/React.createElement("hr",null),/*#__PURE__*/React.createElement("p",null,getBonusPartLabel(a,d)," ",/*#__PURE__*/React.createElement("span",{dangerouslySetInnerHTML:{__html:b.parts[d]}})),/*#__PURE__*/React.createElement("b",null,"ANSWER: "),/*#__PURE__*/React.createElement("span",{dangerouslySetInnerHTML:{__html:c?"":b?.answers[d]}})))),/*#__PURE__*/React.createElement("div",{className:`card-footer clickable ${d&&"d-none"}`,onClick:function(){fetch("/auth/question-stats/single-bonus?"+new URLSearchParams({bonus_id:g})).then(a=>{switch(a.status){case 401:throw document.getElementById("bonus-stats-body").textContent="You need to make an account with a verified email to view question stats.",account.deleteUsername(),new Error("Unauthenticated");case 403:throw document.getElementById("bonus-stats-body").textContent="You need verify your account email to view question stats.",new Error("Forbidden")}return a}).then(a=>a.json()).then(a=>{document.getElementById("bonus-stats-question-id").value=g;const{stats:b}=a;return b?void(document.getElementById("bonus-stats-body").innerHTML=`
            <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    BH
                    <span>${b.count}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    1st part
                    <span>${(10*b.part1).toFixed(2)} pts</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    2nd part
                    <span>${(10*b.part2).toFixed(2)} pts</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    3rd part
                    <span>${(10*b.part3).toFixed(2)} pts</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    30s/20s/10s/0s
                    <span>${b["30s"]}/${b["20s"]}/${b["10s"]}/${b["0s"]}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    Total points
                    <span>${b.totalPoints}</span>
                </li>
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    PPB
                    <span>${b.ppb.toFixed(2)}</span>
                </li>
            </ul>
            `):void(document.getElementById("bonus-stats-body").textContent="No stats found for this question.")}).catch(a=>{console.error("Error:",a)})},"data-bs-toggle":"modal","data-bs-target":"#bonus-stats-modal"},/*#__PURE__*/React.createElement("small",{className:"text-muted"},a.packet.name?"Packet "+a.packet.name:/*#__PURE__*/React.createElement("span",null,"\xA0")),/*#__PURE__*/React.createElement("small",{className:"text-muted float-end"},/*#__PURE__*/React.createElement("a",{href:"#",onClick:function(){document.getElementById("report-question-id").value=g},id:`report-question-${g}`,"data-bs-toggle":"modal","data-bs-target":"#report-question-modal"},"Report Question"))))}