var e,t,n,s,o,a={18:(e,t,n)=>{n.d(t,{A:()=>a});const s=[[0,"Pop Culture"],[1,"Middle School"],[2,"Easy High School"],[3,"Regular High School"],[4,"Hard High School"],[5,"National High School"],[6,"● / Easy College"],[7,"●● / Medium College"],[8,"●●● / Regionals College"],[9,"●●●● / Nationals College"],[10,"Open"]];function o({startChecked:e=!1,label:t,value:n}){const[s,o]=React.useState(e);return React.createElement("li",{className:s?"active":void 0},React.createElement("label",null,React.createElement("input",{type:"checkbox",value:n,onClick:function(e){o(e.target.checked)},defaultChecked:s}),n,": ",t))}const a=function({startingDifficulties:e=[],onChange:t=()=>{}}){return React.createElement("div",{className:"dropdown-checklist btn-group w-100"},React.createElement("button",{className:"btn btn-default text-start w-100",id:"dropdownMenu1","data-bs-toggle":"dropdown",type:"button","aria-expanded":"true","aria-haspopup":"true"},"Difficulties"),React.createElement("button",{className:"btn btn-default dropdown-toggle dropdown-toggle-split","data-bs-toggle":"dropdown",type:"button"}),React.createElement("ul",{className:"dropdown-menu checkbox-menu allow-focus",id:"difficulties","aria-labelledby":"dropdownMenu1",onClick:e=>e.stopPropagation(),onChange:t},s.map(([t,n])=>React.createElement(o,{key:t,label:n,startChecked:e.includes(t),value:t}))))}},36:(e,t,n)=>{async function s(){const e=await fetch("/api/set-list");return(await e.json()).setList}n.d(t,{A:()=>s})},107:(e,t,n)=>{n.d(t,{A:()=>r});var s=n(685);class o{static starredSvg='<i class="bi bi-star-fill"></i>';static unstarredSvg='<i class="bi bi-star"></i>';static async starBonus(e){return fetch("/auth/stars/star-bonus",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bonus_id:e})}).then(e=>(401===e.status?new bootstrap.Toast(document.getElementById("star-toast")).show():e.ok||window.alert("There was an error starring the bonus."),e.ok)).catch(e=>(window.alert("There was an error starring the bonus."),!1))}static async starTossup(e){return fetch("/auth/stars/star-tossup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tossup_id:e})}).then(e=>(401===e.status?new bootstrap.Toast(document.getElementById("star-toast")).show():e.ok||window.alert("There was an error starring the bonus."),e.ok)).catch(e=>(window.alert("There was an error starring the bonus."),!1))}static async unstarBonus(e){return fetch("/auth/stars/unstar-bonus",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({bonus_id:e})}).then(e=>(401===e.status?new bootstrap.Toast(document.getElementById("star-toast")).show():e.ok||window.alert("There was an error unstarring the bonus."),e.ok)).catch(e=>(window.alert("There was an error unstarring the bonus."),!1))}static async unstarTossup(e){return fetch("/auth/stars/unstar-tossup",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({tossup_id:e})}).then(e=>(401===e.status?new bootstrap.Toast(document.getElementById("star-toast")).show():e.ok||window.alert("There was an error unstarring the bonus."),e.ok)).catch(e=>(window.alert("There was an error unstarring the bonus."),!1))}static async isStarredBonus(e){return!!await s.A.getUsername()&&await fetch(`/auth/stars/is-starred-bonus?bonus_id=${e}`).then(e=>e.json()).then(e=>e.isStarred).catch(e=>!1)}static async isStarredTossup(e){return!!await s.A.getUsername()&&await fetch(`/auth/stars/is-starred-tossup?tossup_id=${e}`).then(e=>e.json()).then(e=>e.isStarred).catch(e=>!1)}static async getStarredTossups(){return await fetch("/auth/stars/tossups").then(e=>e.json()).then(e=>e)}static async getStarredBonuses(){return await fetch("/auth/stars/bonuses").then(e=>e.json()).then(e=>e)}static async getStarredTossupIds(){return await s.A.getUsername()?await fetch("/auth/stars/tossup-ids").then(e=>e.json()).then(e=>e):[]}static async getStarredBonusIds(){return await s.A.getUsername()?await fetch("/auth/stars/bonus-ids").then(e=>e.json()).then(e=>e):[]}static async clearStarredTossups(){const e=await fetch("/auth/stars/clear-tossup-stars",{method:"DELETE",headers:{"Content-Type":"application/json"}});e.ok||window.alert("There was an error clearing starred tossups.");const{count:t}=await e.json();t&&window.alert(`Cleared ${t} starred tossups.`)}static async clearStarredBonuses(){const e=await fetch("/auth/stars/clear-bonus-stars",{method:"DELETE",headers:{"Content-Type":"application/json"}});e.ok||window.alert("There was an error clearing starred bonuses.");const{count:t}=await e.json();t&&window.alert(`Cleared ${t} starred bonuses.`)}}var a=n(412);async function r({roomHistoryId:e="room-history",starred:t,tossup:n}){if(!n||0===Object.keys(n).length)return;const{markedQuestion:s,answer:r,category:i,subcategory:c,alternate_subcategory:l,set:d,packet:u,number:m,_id:g}=n;t=t??await o.isStarredTossup(g);const p=document.createElement("div");p.className="card my-2",p.innerHTML=`\n    <div class="card-header d-flex justify-content-between">\n      <span class="card-header-clickable clickable" data-bs-toggle="collapse" data-bs-target="#question-${g}" aria-expanded="true">\n        ${(0,a.$)(r)}\n      </span>\n      <a href="#" class="star-tossup ${t?"selected":""}" id="star-tossup-${g}">\n        ${t?o.starredSvg:o.unstarredSvg}\n      </a>\n    </div>\n    <div class="card-container collapse" id="question-${g}">\n      <div class="card-body">\n        ${s}\n        <a class="user-select-none" href="#" id="report-question-${g}" data-bs-toggle="modal" data-bs-target="#report-question-modal">Report Question</a>\n        <hr></hr>\n        <div>ANSWER: ${r}</div>\n      </div>\n      <div class="card-footer">\n        <small class="text-muted">${d.name} / ${i} / ${c}${l?" / "+l:""}</small>\n        <small class="text-muted float-end">Packet ${u.number} / Question ${m}</small>\n      </div>\n    </div>\n  `,document.getElementById(e).prepend(p),document.getElementById("report-question-"+g).addEventListener("click",function(){document.getElementById("report-question-id").value=g}),document.getElementById("star-tossup-"+g).addEventListener("click",async function(e){e.preventDefault(),e.stopPropagation(),this.classList.contains("selected")?(this.innerHTML=o.unstarredSvg,o.unstarTossup(g),this.classList.remove("selected")):await o.starTossup(g)&&(this.innerHTML=o.starredSvg,this.classList.add("selected"))})}},118:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{A:()=>d});var o=n(837),a=n(685),r=n(599),i=n(994),c=n(36);const l=await(0,c.A)();class d{constructor(e,t){this.room=e,this.USER_ID=t,this.SET_LIST=l,document.getElementById("set-list").innerHTML=this.SET_LIST.map(e=>`<option>${e}</option>`).join("")}onmessage(e){const t=JSON.parse(e);switch(t.type){case"alert":return window.alert(t.message);case"end":case"next":case"skip":case"start":return this.next(t);case"end-of-set":return this.endOfSet(t);case"give-answer":return this.giveAnswer(t);case"no-questions-found":return this.noQuestionsFound(t);case"set-categories":return this.setCategories(t);case"set-difficulties":return this.setDifficulties(t);case"set-mode":return this.setMode(t);case"set-packet-numbers":return this.setPacketNumbers(t);case"set-set-name":return this.setSetName(t);case"set-strictness":return this.setStrictness(t);case"set-year-range":return this.setYearRange(t);case"timer-update":return this.timerUpdate(t);case"toggle-standard-only":return this.toggleStandardOnly(t);case"toggle-timer":return this.toggleTimer(t)}}endOfSet(){window.alert("You have reached the end of the set")}giveAnswer({directive:e,directedPrompt:t,score:n,userId:s}){document.getElementById("answer-input").value="",document.getElementById("answer-input").blur(),document.getElementById("answer-input").placeholder="Enter answer",document.getElementById("answer-input-group").classList.add("d-none"),"prompt"===e&&s===this.USER_ID&&(document.getElementById("answer-input-group").classList.remove("d-none"),document.getElementById("answer-input").focus(),document.getElementById("answer-input").placeholder=t?`Prompt: "${t}"`:"Prompt"),r.A.soundEffects&&s===this.USER_ID&&("accept"===e&&n&&n>10?r.A.power.play():"accept"===e?r.A.correct.play():"reject"===e&&r.A.incorrect.play())}next({type:e,nextQuestion:t,packetLength:n}){document.getElementById("question").textContent="",document.getElementById("settings").classList.add("d-none"),"end"!==e&&(document.getElementById("packet-length-info").textContent=this.room.mode===o.mT.SET_NAME?n:"-",document.getElementById("packet-number-info").textContent=t.packet.number,document.getElementById("set-name-info").textContent=t.set.name,document.getElementById("question-number-info").textContent=t.number)}noQuestionsFound(){window.alert("No questions found")}setCategories(){this.room.categoryManager.loadCategoryModal()}setDifficulties(){throw new Error("Not implemented")}setMode({mode:e}){switch(document.getElementById("set-mode").value=e,e){case o.mT.SET_NAME:document.getElementById("difficulty-settings").classList.add("d-none"),document.getElementById("set-settings").classList.remove("d-none");break;case o.mT.RANDOM:document.getElementById("difficulty-settings").classList.remove("d-none"),document.getElementById("set-settings").classList.add("d-none")}}setPacketNumbers({packetNumbers:e}){document.getElementById("packet-number").value=(0,i.w)(e)}setSetName({setName:e,setLength:t}){document.getElementById("set-name").value=e;const n=!e||this.SET_LIST.includes(e);document.getElementById("packet-number").placeholder="Packet Numbers"+(t?` (1-${t})`:""),document.getElementById("set-name").classList.toggle("is-invalid",!n)}setStrictness({strictness:e}){document.getElementById("set-strictness").value=e,document.getElementById("strictness-display").textContent=e}setYearRange({minYear:e,maxYear:t}){$("#slider").slider("values",[e,t]),document.getElementById("year-range-a").textContent=e,document.getElementById("year-range-b").textContent=t}timerUpdate({timeRemaining:e}){const t=Math.floor(e/10),n=e%10;document.querySelector(".timer .face").textContent=t,document.querySelector(".timer .fraction").textContent="."+n}toggleStandardOnly({standardOnly:e}){document.getElementById("toggle-standard-only").checked=e}toggleTimer({timer:e}){document.getElementById("timer").classList.toggle("d-none",!e),document.getElementById("toggle-timer").checked=e}}const u=window.localStorage.getItem("font-size");function m(){if(window.navigator.userAgent.match(/Mobile.*Firefox/)){const e=document.getElementById("set-name");e.addEventListener("input",function(){document.getElementById("set-dropdown")?.remove();const t=this.value.toLowerCase(),n=l.filter(e=>e.toLowerCase().includes(t)).map(e=>`<a class="dropdown-item" onclick="fillSetName(event)">${e}</a>`).join(""),s=""===n?"":`\n        <div id="set-dropdown" class="dropdown-menu" style="display: inline" aria-labelledby="set-name">\n            ${n}\n        </div>\n        `;e.insertAdjacentHTML("afterend",s)}),e.addEventListener("blur",function(){document.getElementById("set-dropdown")?.remove()})}}u&&document.getElementById("question").style.setProperty("font-size",`${u}px`),"true"===window.localStorage.getItem("high-contrast-question-text")&&document.getElementById("question").classList.add("high-contrast-question-text"),m();const g={};a.A.getUsername().then(e=>{const t=new bootstrap.Toast(document.getElementById("funny-toast")),n=document.getElementById("funny-toast-text");e in g&&(n.textContent=g[e],t.show())}),document.querySelectorAll("span.default-min-year").forEach(e=>{e.textContent=o.jG}),document.querySelectorAll("span.default-max-year").forEach(e=>{e.textContent=o.d2});const p=[];document.body.onmouseup=function(){for(let e=0;e<p.length;++e)p[e].onchange&&p[e].onchange();p.length=0},$("#slider").slider({min:o.zN,max:o.d2,step:1,values:[o.jG,o.d2],slide:function(e,t){for(let e=0;e<t.values.length;++e)$(`span.sliderValue${e}`)[0].textContent=t.values[e],p.includes($(`span.sliderValue${e}`)[0])||p.push($(`span.sliderValue${e}`)[0])}}),document.getElementById("slider").classList.remove("ui-widget-content"),document.getElementById("slider").classList.remove("ui-widget"),$("input.sliderValue").change(function(){const e=$(this);$("#slider").slider("values",e.data("index"),e.val())}),s()}catch(h){s(h)}},1)},283:(e,t,n)=>{function s(e,t,n){document.getElementById("report-question-submit").disabled=!0,fetch("/api/report-question",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e,reason:t,description:n})}).then(e=>{200===e.status?(document.getElementById("report-question-reason").value="wrong-category",document.getElementById("report-question-description").value="",window.alert("Question has been reported.")):window.alert("There was an error reporting the question.")}).catch(e=>{window.alert("There was an error reporting the question.")}).finally(()=>{document.getElementById("report-question-close").click(),document.getElementById("report-question-submit").disabled=!1})}n.d(t,{A:()=>s})},380:(e,t,n)=>{n.d(t,{A:()=>a});const s=["adaptable","adept","affectionate","agreeable","alluring","amazing","ambitious","amiable","ample","approachable","awesome","blithesome","bountiful","brave","breathtaking","bright","brilliant","capable","captivating","charming","competitive","confident","considerate","courageous","creative","dazzling","determined","devoted","diligent","diplomatic","dynamic","educated","efficient","elegant","enchanting","energetic","engaging","excellent","fabulous","faithful","fantastic","favorable","fearless","flexible","focused","fortuitous","frank","friendly","funny","generous","giving","gleaming","glimmering","glistening","glittering","glowing","gorgeous","gregarious","gripping","hardworking","helpful","hilarious","honest","humorous","imaginative","incredible","independent","inquisitive","insightful","kind","knowledgeable","likable","lovely","loving","loyal","lustrous","magnificent","marvelous","mirthful","moving","nice","optimistic","organized","outstanding","passionate","patient","perfect","persistent","personable","philosophical","plucky","polite","powerful","productive","proficient","propitious","qualified","ravishing","relaxed","remarkable","resourceful","responsible","romantic","rousing","sensible","shimmering","shining","sincere","sleek","sparkling","spectacular","spellbinding","splendid","stellar","stunning","stupendous","super","technological","thoughtful","twinkling","unique","upbeat","vibrant","vivacious","vivid","warmhearted","willing","wondrous","zestful"],o=["aardvark","alligator","alpaca","anaconda","ant","anteater","antelope","aphid","armadillo","baboon","badger","barracuda","bat","beaver","bedbug","bee","bird","bison","bobcat","buffalo","butterfly","buzzard","camel","carp","cat","caterpillar","catfish","cheetah","chicken","chimpanzee","chipmunk","cobra","cod","condor","cougar","cow","coyote","crab","cricket","crocodile","crow","cuckoo","deer","dinosaur","dog","dolphin","donkey","dove","dragonfly","duck","eagle","eel","elephant","emu","falcon","ferret","finch","fish","flamingo","flea","fly","fox","frog","goat","goose","gopher","gorilla","hamster","hare","hawk","hippopotamus","horse","hummingbird","husky","iguana","impala","kangaroo","lemur","leopard","lion","lizard","llama","lobster","margay","monkey","moose","mosquito","moth","mouse","mule","octopus","orca","ostrich","otter","owl","ox","oyster","panda","parrot","peacock","pelican","penguin","perch","pheasant","pig","pigeon","porcupine","quagga","rabbit","raccoon","rat","rattlesnake","rooster","seal","sheep","skunk","sloth","snail","snake","spider","tiger","whale","wolf","wombat","zebra"];function a(){const e=Math.floor(Math.random()*s.length),t=Math.floor(Math.random()*o.length);return`${s[e]}-${o[t]}`}},412:(e,t,n)=>{function s(e){return e?.replaceAll("&","&amp;")?.replaceAll("<","&lt;")?.replaceAll(">","&gt;")?.replaceAll('"',"&quot;")?.replaceAll("'","&#039;")}function o(e){return e.replace(/\[[^\]]*\]/g,"").replace(/\([^)]*\)/g,"").trim()}n.d(t,{$:()=>o,Zn:()=>s})},496:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(685);class o{static async recordBonus({_id:e,pointsPerPart:t}){await s.A.getUsername()&&fetch("/auth/question-stats/record-bonus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e,pointsPerPart:t})}).then(e=>{if(401===e.status)throw s.A.deleteUsername(),new Error("Unauthenticated")})}static async recordTossup({_id:e,celerity:t,isCorrect:n,multiplayer:o,pointValue:a}){await s.A.getUsername()&&fetch("/auth/question-stats/record-tossup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:e,isCorrect:n,pointValue:a,celerity:t,multiplayer:o})}).then(e=>{if(401===e.status)throw s.A.deleteUsername(),new Error("Unauthenticated")})}}},512:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{A:()=>d});var o=n(837),a=n(496),r=n(994),i=n(756),c=n(528),l=e([c]);c=(l.then?(await l)():l)[0];class d extends c.A{constructor(e,t,n){super(e,t),this.socket=n}onmessage(e){const t=JSON.parse(e.data);switch(t.type){case"chat":return this.chat(t,!1);case"chat-live-update":return this.chat(t,!0);case"clear-stats":return this.clearStats(t);case"confirm-ban":return this.confirmBan(t);case"connection-acknowledged":return this.connectionAcknowledged(t);case"connection-acknowledged-query":return this.connectionAcknowledgedQuery(t);case"connection-acknowledged-tossup":return this.connectionAcknowledgedTossup(t);case"enforcing-removal":return this.ackRemovedFromRoom(t);case"error":return this.handleError(t);case"force-username":return this.forceUsername(t);case"give-answer-live-update":return this.logGiveAnswer(t);case"initiated-vk":return this.vkInit(t);case"join":return this.join(t);case"leave":return this.leave(t);case"lost-buzzer-race":return this.lostBuzzerRace(t);case"mute-player":return this.mutePlayer(t);case"no-points-votekick-attempt":return this.failedVotekickPoints(t);case"owner-change":return this.ownerChange(t);case"set-username":return this.setUsername(t);case"successful-vk":return this.vkHandle(t);case"toggle-controlled":return this.toggleControlled(t);case"toggle-lock":return this.toggleLock(t);case"toggle-login-required":return this.toggleLoginRequired(t);case"toggle-public":return this.togglePublic(t);default:return super.onmessage(e.data)}}ackRemovedFromRoom({removalType:e}){"kick"===e?window.alert("You were kicked from this this.room by this.room.players, and cannot rejoin it."):window.alert("You were banned from this this.room by the this.room owner, and cannot rejoin it."),setTimeout(()=>{window.location.replace("../")},100)}buzz({userId:e,username:t}){this.logEventConditionally(t,"buzzed"),document.getElementById("skip").disabled=!0,e===this.USER_ID&&(document.getElementById("answer-input-group").classList.remove("d-none"),document.getElementById("answer-input").focus()),super.buzz({userId:e})}chat({message:e,userId:t,username:n},s=!1){if(this.room.muteList.includes(t))return;if(!s&&""===e)return void document.getElementById("live-chat-"+t).parentElement.remove();if(!s&&e)return document.getElementById("live-chat-"+t).className="",void(document.getElementById("live-chat-"+t).id="");if(document.getElementById("live-chat-"+t))return void(document.getElementById("live-chat-"+t).textContent=e);const o=document.createElement("b");o.textContent=n;const a=document.createElement("span");a.classList.add("text-muted"),a.id="live-chat-"+t,a.textContent=e;const r=document.createElement("li");r.appendChild(o),r.appendChild(document.createTextNode(" ")),r.appendChild(a),document.getElementById("room-history").prepend(r)}clearStats({userId:e}){for(const t of["celerity","negs","points","powers","tens","tuh","zeroes"])this.room.players[e][t]=0;(0,i.A)(this.room.players[e],this.USER_ID,this.room.ownerId,this.socket,this.room.public),this.sortPlayerListGroup()}confirmBan({targetId:e,targetUsername:t}){e===this.USER_ID?(window.alert("You were banned from this this.room by the this.room owner."),setTimeout(()=>{window.location.replace("../")},100)):this.logEventConditionally(t+" has been banned from this this.room.")}connectionAcknowledged({buzzedIn:e,canBuzz:t,isPermanent:n,ownerId:s,mode:a,packetLength:r,players:c,questionProgress:l,settings:d,setLength:u,userId:m}){this.room.public=d.public,this.room.ownerId=s,this.room.setLength=u,this.USER_ID=m,window.localStorage.setItem("USER_ID",this.USER_ID),document.getElementById("buzz").disabled=!t,n&&(document.getElementById("category-select-button").disabled=!0,document.getElementById("permanent-this.room-warning").classList.remove("d-none"),document.getElementById("reading-speed").disabled=!0,document.getElementById("set-strictness").disabled=!0,document.getElementById("set-mode").disabled=!0,document.getElementById("toggle-public").disabled=!0);for(const e of Object.keys(c))c[e].celerity=c[e].celerity.correct.average,this.room.players[e]=c[e],(0,i.A)(this.room.players[e],this.USER_ID,this.room.ownerId,this.socket,this.room.public);switch(this.sortPlayerListGroup(),this.setMode({mode:a}),document.getElementById("packet-length-info").textContent=a===o.mT.SET_NAME?r:"-",l){case 0:document.getElementById("next").textContent="Start",document.getElementById("next").classList.remove("btn-primary"),document.getElementById("next").classList.add("btn-success");break;case 1:this.showSkipButton(),document.getElementById("settings").classList.add("d-none"),e?(document.getElementById("buzz").disabled=!0,document.getElementById("next").disabled=!0,document.getElementById("pause").disabled=!0):(document.getElementById("buzz").disabled=!1,document.getElementById("pause").disabled=!1);break;case 2:this.showNextButton(),document.getElementById("settings").classList.add("d-none")}this.toggleLock({lock:d.lock}),this.toggleLoginRequired({loginRequired:d.loginRequired}),this.toggleRebuzz({rebuzz:d.rebuzz}),this.toggleSkip({skip:d.skip}),this.toggleTimer({timer:d.timer}),this.setReadingSpeed({readingSpeed:d.readingSpeed}),this.setStrictness({strictness:d.strictness}),d.controlled&&this.toggleControlled({controlled:d.controlled}),d.public&&this.togglePublic({public:d.public})}async connectionAcknowledgedQuery({difficulties:e=[],minYear:t,maxYear:n,packetNumbers:s=[],powermarkOnly:o,setName:a="",standardOnly:i,alternateSubcategories:c,categories:l,subcategories:d,percentView:u,categoryPercents:m}){this.setDifficulties({difficulties:e}),document.getElementById("year-range-a").textContent=t,document.getElementById("year-range-b").textContent=n,document.getElementById("packet-number").value=(0,r.w)(s),document.getElementById("toggle-powermark-only").checked=o,document.getElementById("set-name").value=a,""!==a&&0===this.room.setLength&&document.getElementById("set-name").classList.add("is-invalid"),document.getElementById("toggle-standard-only").checked=i,this.setCategories({categories:l,subcategories:d,alternateSubcategories:c,percentView:u,categoryPercents:m}),$(document).ready(function(){$("#slider").slider("values",0,t),$("#slider").slider("values",1,n)})}connectionAcknowledgedTossup({tossup:e}){this.room.tossup=e,document.getElementById("set-name-info").textContent=this.room.tossup?.set?.name??"",document.getElementById("packet-number-info").textContent=this.room.tossup?.packet?.number??"-",document.getElementById("question-number-info").textContent=this.room.tossup?.number??"-"}failedVotekickPoints({userId:e}){e===this.USER_ID&&window.alert("You can only votekick once you have answered a question correctly!")}forceUsername({message:e,username:t}){window.alert(e),window.localStorage.setItem("multiplayer-username",t),document.querySelector("#username").value=t}async giveAnswer({celerity:e,directive:t,directedPrompt:n,givenAnswer:s,perQuestionCelerity:o,score:r,tossup:c,userId:l,username:d}){this.logGiveAnswer({directive:t,givenAnswer:s,username:d}),"prompt"===t&&n?this.logEventConditionally(d,`was prompted with "${n}"`):"prompt"===t?this.logEventConditionally(d,"was prompted"):this.logEventConditionally(d,`${r>0?"":"in"}correctly answered for ${r} points`),super.giveAnswer({directive:t,directedPrompt:n,score:r,userId:l}),"prompt"!==t&&(document.getElementById("pause").disabled=!1,"accept"===t&&(document.getElementById("buzz").disabled=!0,Array.from(document.getElementsByClassName("tuh")).forEach(e=>{e.textContent=parseInt(e.innerHTML)+1})),"reject"===t&&(document.getElementById("buzz").disabled=!document.getElementById("toggle-rebuzz").checked&&l===this.USER_ID),r>10?this.room.players[l].powers++:10===r?this.room.players[l].tens++:r<0&&this.room.players[l].negs++,this.room.players[l].points+=r,this.room.players[l].tuh++,this.room.players[l].celerity=e,(0,i.A)(this.room.players[l],this.USER_ID,this.room.ownerId,this.socket,this.room.public),this.sortPlayerListGroup(),l===this.USER_ID&&a.A.recordTossup({_id:c._id,celerity:o,isCorrect:r>0,multiplayer:!0,pointValue:r}))}handleError({message:e}){this.socket.close(3e3),window.alert(e),window.location.href="/multiplayer"}join({isNew:e,user:t,userId:n,username:s}){this.logEventConditionally(s,"joined the game"),n!==this.USER_ID&&(this.room.players[n]=t,e?(t.celerity=t.celerity.correct.average,(0,i.A)(t,this.USER_ID,this.room.ownerId,this.socket,this.room.public),this.sortPlayerListGroup()):(document.getElementById(`list-group-${n}`).classList.remove("offline"),document.getElementById("points-"+n).classList.add("bg-success"),document.getElementById("points-"+n).classList.remove("bg-secondary"),document.getElementById("username-"+n).textContent=s))}leave({userId:e,username:t}){this.logEventConditionally(t,"left the game"),this.room.players[e].online=!1,document.getElementById(`list-group-${e}`).classList.add("offline"),document.getElementById(`points-${e}`).classList.remove("bg-success"),document.getElementById(`points-${e}`).classList.add("bg-secondary")}logEventConditionally(e,t){if(void 0===e)return;const n=document.createElement("span");n.textContent=e;const s=document.createElement("span");s.textContent=t;const o=document.createElement("i");o.appendChild(n),o.appendChild(document.createTextNode(" ")),o.appendChild(s);const a=document.createElement("li");a.appendChild(o),document.getElementById("room-history").prepend(a)}logGiveAnswer({directive:e=null,givenAnswer:t,username:n}){const s=document.createElement("span");switch(s.textContent="Buzz",e){case"accept":s.className="badge text-dark bg-success";break;case"reject":s.className="badge text-light bg-danger";break;case"prompt":s.className="badge text-dark bg-warning";break;default:s.className="badge text-light bg-primary"}const o=document.createElement("b");o.textContent=n;const a=document.createElement("span");let r;if(a.textContent=t,document.getElementById("live-buzz")?(r=document.getElementById("live-buzz"),r.textContent=""):(r=document.createElement("li"),r.id="live-buzz",document.getElementById("room-history").prepend(r)),r.appendChild(s),r.appendChild(document.createTextNode(" ")),r.appendChild(o),r.appendChild(document.createTextNode(" ")),r.appendChild(a),"accept"===e||"reject"===e){const t=document.createElement("span");t.className=s.className,"accept"===e?t.textContent="Correct":"reject"===e&&(t.textContent="Incorrect"),r.appendChild(document.createTextNode(" ")),r.appendChild(t)}e&&(r.id="")}lostBuzzerRace({username:e,userId:t}){this.logEventConditionally(e,"lost the buzzer race"),t===this.USER_ID&&document.getElementById("answer-input-group").classList.add("d-none")}mutePlayer({targetId:e,targetUsername:t,muteStatus:n}){"Mute"===n?this.room.muteList.includes(e)||(this.room.muteList.push(e),this.logEventConditionally(t,"was muted")):this.room.muteList.includes(e)&&(this.room.muteList=this.room.muteList.filter(t=>t!==e),this.logEventConditionally(t,"was unmuted"))}next({packetLength:e,oldTossup:t,tossup:n,type:s,username:o}){this.logEventConditionally(o,{end:"ended the game",next:"went to the next question",skip:"skipped the question",start:"started the game"}[s]),super.next({nextTossup:n,oldTossup:t,packetLength:e,type:s}),"start"===s&&(document.getElementById("next").classList.add("btn-primary"),document.getElementById("next").classList.remove("btn-success"),document.getElementById("next").textContent="Next"),"end"===s?(document.getElementById("next").classList.remove("btn-primary"),document.getElementById("next").classList.add("btn-success"),document.getElementById("next").textContent="Start"):this.room.tossup=n,this.showSkipButton()}ownerChange({newOwner:e}){this.room.players[e]?(this.room.ownerId=e,this.logEventConditionally(this.room.players[e].username,"became the this.room owner")):this.logEventConditionally(e,"became the this.room owner"),Object.keys(this.room.players).forEach(e=>{(0,i.A)(this.room.players[e],this.USER_ID,this.room.ownerId,this.socket,this.room.public)}),document.getElementById("toggle-controlled").disabled=this.room.public||this.room.ownerId!==this.USER_ID}pause({paused:e,username:t}){this.logEventConditionally(t,(e?"":"un")+"paused the game"),super.pause({paused:e})}revealAnswer({answer:e,question:t}){super.revealAnswer({answer:e,question:t}),this.showNextButton()}setCategories({alternateSubcategories:e,categories:t,subcategories:n,percentView:s,categoryPercents:o,username:a}){this.logEventConditionally(a,"updated the categories"),this.room.categoryManager.import({categories:t,subcategories:n,alternateSubcategories:e,percentView:s,categoryPercents:o}),document.getElementById("category-modal")&&super.setCategories()}setDifficulties({difficulties:e,username:t}){this.logEventConditionally(t,e.length>0?`set the difficulties to ${e}`:"cleared the difficulties"),document.getElementById("difficulties")?Array.from(document.getElementById("difficulties").children).forEach(t=>{const n=t.querySelector("input");e.includes(parseInt(n.value))?(n.checked=!0,t.classList.add("active")):(n.checked=!1,t.classList.remove("active"))}):this.room.difficulties=e}setMode({mode:e,setName:t,username:n}){switch(this.logEventConditionally(n,"changed the mode to "+e),this.room.mode=e,e){case o.mT.SET_NAME:document.getElementById("set-name").textContent=t;case o.mT.RANDOM:}super.setMode({mode:e})}setPacketNumbers({username:e,packetNumbers:t}){super.setPacketNumbers({packetNumbers:t}),this.logEventConditionally(e,t.length>0?`changed packet numbers to ${(0,r.w)(t)}`:"cleared packet numbers")}setReadingSpeed({username:e,readingSpeed:t}){super.setReadingSpeed({readingSpeed:t}),this.logEventConditionally(e,`changed the reading speed to ${t}`)}setStrictness({strictness:e,username:t}){this.logEventConditionally(t,`changed the strictness to ${e}`),super.setStrictness({strictness:e})}setSetName({username:e,setName:t,setLength:n}){this.logEventConditionally(e,t.length>0?`changed set name to ${t}`:"cleared set name"),this.room.setLength=n,super.setSetName({setName:t,setLength:n})}setUsername({oldUsername:e,newUsername:t,userId:n}){this.logEventConditionally(e,`changed their username to ${t}`),document.getElementById("username-"+n).textContent=t,this.room.players[n].username=t,this.sortPlayerListGroup(),n===this.USER_ID&&(this.room.username=t,window.localStorage.setItem("multiplayer-username",this.room.username),document.getElementById("username").value=this.room.username),(0,i.A)(this.room.players[n],this.USER_ID,this.room.ownerId,this.socket,this.room.public)}setYearRange({minYear:e,maxYear:t,username:n}){this.logEventConditionally(n,`changed the year range to ${e}-${t}`),super.setYearRange({minYear:e,maxYear:t})}showNextButton(){document.getElementById("next").classList.remove("d-none"),document.getElementById("next").disabled=!1,document.getElementById("skip").classList.add("d-none"),document.getElementById("skip").disabled=!0}showSkipButton(){document.getElementById("skip").classList.remove("d-none"),document.getElementById("skip").disabled=!document.getElementById("toggle-skip").checked,document.getElementById("next").classList.add("d-none"),document.getElementById("next").disabled=!0}sortPlayerListGroup(e=!0){const t=document.getElementById("player-list-group");Array.from(t.children).sort((t,n)=>{const s=parseInt(document.getElementById("points-"+t.id.substring(11)).innerHTML),o=parseInt(document.getElementById("points-"+n.id.substring(11)).innerHTML);if(s===o){const s=document.getElementById("username-"+t.id.substring(11)).innerHTML,o=document.getElementById("username-"+n.id.substring(11)).innerHTML;return e?s.localeCompare(o):o.localeCompare(s)}return e?o-s:s-o}).forEach(e=>{t.appendChild(e)})}toggleControlled({controlled:e,username:t}){this.logEventConditionally(t,(e?"enabled":"disabled")+" controlled mode"),document.getElementById("toggle-controlled").checked=e,document.getElementById("controlled-this.room-warning").classList.toggle("d-none",!e),document.getElementById("toggle-public").disabled=e,e=e&&this.USER_ID!==this.room.ownerId,document.getElementById("toggle-lock").disabled=e,document.getElementById("toggle-login-required").disabled=e,document.getElementById("toggle-timer").disabled=e,document.getElementById("toggle-powermark-only").disabled=e,document.getElementById("toggle-rebuzz").disabled=e,document.getElementById("toggle-skip").disabled=e,document.getElementById("toggle-standard-only").disabled=e,document.getElementById("category-select-button").disabled=e,document.getElementById("reading-speed").disabled=e,document.getElementById("set-mode").disabled=e,document.getElementById("set-strictness").disabled=e}toggleLock({lock:e,username:t}){this.logEventConditionally(t,(e?"locked":"unlocked")+" the this.room"),document.getElementById("toggle-lock").checked=e}toggleLoginRequired({loginRequired:e,username:t}){this.logEventConditionally(t,(e?"enabled":"disabled")+" require this.room.players to be logged in"),document.getElementById("toggle-login-required").checked=e}togglePowermarkOnly({powermarkOnly:e,username:t}){this.logEventConditionally(t,(e?"enabled":"disabled")+" powermark only"),super.togglePowermarkOnly({powermarkOnly:e})}toggleRebuzz({rebuzz:e,username:t}){this.logEventConditionally(t,(e?"enabled":"disabled")+" multiple buzzes (effective next question)"),super.toggleRebuzz({rebuzz:e})}toggleSkip({skip:e,username:t}){this.logEventConditionally(t,(e?"enabled":"disabled")+" skipping"),document.getElementById("toggle-skip").checked=e,document.getElementById("skip").disabled=!e||document.getElementById("skip").classList.contains("d-none")}toggleStandardOnly({standardOnly:e,username:t}){this.logEventConditionally(t,(e?"enabled":"disabled")+" standard format only"),super.toggleStandardOnly({standardOnly:e})}toggleTimer({timer:e,username:t}){this.logEventConditionally(t,(e?"enabled":"disabled")+" the timer"),super.toggleTimer({timer:e})}togglePublic({public:e,username:t}){this.logEventConditionally(t,"made the this.room "+(e?"public":"private")),document.getElementById("chat").disabled=e,document.getElementById("toggle-controlled").disabled=e||this.room.ownerId!==this.USER_ID,document.getElementById("toggle-lock").disabled=e,document.getElementById("toggle-login-required").disabled=e,document.getElementById("toggle-public").checked=e,document.getElementById("toggle-timer").disabled=e,this.room.public=e,e&&(document.getElementById("toggle-lock").checked=!1,document.getElementById("toggle-login-required").checked=!1,this.toggleTimer({timer:!0})),Object.keys(this.room.players).forEach(e=>{(0,i.A)(this.room.players[e],this.USER_ID,this.room.ownerId,this.socket,this.room.public)})}vkInit({targetUsername:e,threshold:t}){this.logEventConditionally(`A votekick has been started against user ${e} and needs ${t} votes to succeed.`)}vkHandle({targetUsername:e,targetId:t}){this.USER_ID===t?(window.alert("You were vote kicked from this this.room by others."),setTimeout(()=>{window.location.replace("../")},100)):this.logEventConditionally(e+" has been vote kicked from this this.room.")}}s()}catch(e){s(e)}})},528:(e,t,n)=>{n.a(e,async(e,s)=>{try{n.d(t,{A:()=>l});var o=n(599),a=n(837),r=n(107),i=n(118),c=e([i]);i=(c.then?(await c)():c)[0];class l extends i.A{onmessage(e){const t=JSON.parse(e);switch(t.type){case"buzz":return this.buzz(t);case"pause":return this.pause(t);case"reveal-answer":return this.revealAnswer(t);case"set-reading-speed":return this.setReadingSpeed(t);case"toggle-powermark-only":return this.togglePowermarkOnly(t);case"toggle-rebuzz":return this.toggleRebuzz(t);case"update-question":return this.updateQuestion(t);default:return super.onmessage(e)}}buzz({userId:e}){document.getElementById("buzz").disabled=!0,document.getElementById("next").disabled=!0,document.getElementById("pause").disabled=!0,e===this.USER_ID&&o.A.soundEffects&&o.A.buzz.play()}giveAnswer({directive:e,directedPrompt:t,score:n,userId:s}){super.giveAnswer({directive:e,directedPrompt:t,score:n,userId:s}),"prompt"!==e&&(document.getElementById("next").disabled=!1)}next({nextTossup:e,oldTossup:t,packetLength:n,starred:s,type:o}){super.next({nextQuestion:e,packetLength:n,type:o}),document.getElementById("answer").textContent="","start"!==o&&(0,r.A)({starred:s,tossup:t}),"end"===o?document.getElementById("buzz").disabled=!0:(document.getElementById("buzz").textContent="Buzz",document.getElementById("buzz").disabled=!1,document.getElementById("pause").textContent="Pause",document.getElementById("pause").disabled=!1)}pause({paused:e}){document.getElementById("pause").textContent=e?"Resume":"Pause"}revealAnswer({answer:e,question:t}){document.getElementById("question").innerHTML=t,document.getElementById("answer").innerHTML="ANSWER: "+e,document.getElementById("pause").disabled=!0}setMode({mode:e}){switch(super.setMode({mode:e}),e){case a.mT.SET_NAME:document.getElementById("toggle-powermark-only").disabled=!0,document.getElementById("toggle-standard-only").disabled=!0;break;case a.mT.RANDOM:document.getElementById("toggle-powermark-only").disabled=!1,document.getElementById("toggle-standard-only").disabled=!1}}setReadingSpeed({readingSpeed:e}){document.getElementById("reading-speed").value=e,document.getElementById("reading-speed-display").textContent=e}togglePowermarkOnly({powermarkOnly:e}){document.getElementById("toggle-powermark-only").checked=e}toggleRebuzz({rebuzz:e}){document.getElementById("toggle-rebuzz").checked=e}updateQuestion({word:e}){"(*)"!==e&&"[*]"!==e&&(document.getElementById("question").innerHTML+=e+" ")}}s()}catch(e){s(e)}})},599:(e,t,n)=>{n.d(t,{A:()=>s});class s{static soundEffects="true"===window.localStorage.getItem("sound-effects");static buzz=new Audio("/audio/buzz.mp3");static correct=new Audio("/audio/correct.mp3");static incorrect=new Audio("/audio/incorrect.mp3");static power=new Audio("/audio/power.mp3")}},649:(e,t,n)=>{n.d(t,{A:()=>r});const s=[["Literature","primary"],["History","success"],["Science","danger"],["Fine Arts","warning"],["Religion","secondary"],["Mythology","secondary"],["Philosophy","secondary"],["Social Science","secondary"],["Current Events","secondary"],["Geography","secondary"],["Other Academic","secondary"],["Pop Culture","secondary"]],o=[["American Literature","primary"],["British Literature","primary"],["Classical Literature","primary"],["European Literature","primary"],["World Literature","primary"],["Other Literature","primary"],["American History","success"],["Ancient History","success"],["European History","success"],["World History","success"],["Other History","success"],["Biology","danger"],["Chemistry","danger"],["Physics","danger"],["Other Science","danger"],["Visual Fine Arts","warning"],["Auditory Fine Arts","warning"],["Other Fine Arts","warning"],["Movies","secondary"],["Music","secondary"],["Sports","secondary"],["Television","secondary"],["Video Games","secondary"],["Other Pop Culture","secondary"]],a=[["Drama","primary"],["Long Fiction","primary"],["Poetry","primary"],["Short Fiction","primary"],["Misc Literature","primary"],["Math","danger"],["Astronomy","danger"],["Computer Science","danger"],["Earth Science","danger"],["Engineering","danger"],["Misc Science","danger"],["Architecture","warning"],["Dance","warning"],["Film","warning"],["Jazz","warning"],["Musicals","warning"],["Opera","warning"],["Photography","warning"],["Misc Arts","warning"],["Anthropology","secondary"],["Economics","secondary"],["Linguistics","secondary"],["Psychology","secondary"],["Sociology","secondary"],["Other Social Science","secondary"]],r=function({categoryManager:e,disablePercentView:t=!1,onClose:n=()=>{}}){function r({category:t,index:n}){function s(t){const s=Math.min(100,Math.max(0,e.categoryPercents[n]+t));e.categoryPercents[n]=s,e.loadCategoryModal()}return React.createElement("tr",null,React.createElement("th",{style:{width:"50%"}},t),React.createElement("td",{style:{width:"50%"}},React.createElement("span",{className:"font-monospace me-1 category-percent"}),React.createElement("div",{className:"btn-group btn-group-sm me-1",role:"group"},React.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>s(-5)},"-"),React.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>s(5)},"+")),React.createElement("div",{className:"btn-group btn-group-sm",role:"group"},React.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>s(-100)},"Min"),React.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>s(50-e.categoryPercents[n])},"50%"),React.createElement("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>s(100-e.categoryPercents.reduce((e,t)=>e+t))},"Max"))))}function i({category:t,color:n}){return React.createElement("div",null,React.createElement("input",{type:"checkbox",className:"btn-check",autoComplete:"off",id:t,onClick:function(){e.updateCategory(t),e.loadCategoryModal()}}),React.createElement("label",{className:`btn btn-outline-${n} w-100 rounded-0 my-1`,htmlFor:t},t,React.createElement("br",null)))}function c({subcategory:t,color:n,hidden:s=!1}){return React.createElement("div",null,React.createElement("input",{type:"checkbox",className:"btn-check",autoComplete:"off",id:t,onClick:function(){e.updateSubcategory(t),e.loadCategoryModal()}}),React.createElement("label",{className:`btn btn-outline-${n} w-100 rounded-0 my-1 ${s&&"d-none"}`,htmlFor:t},t,React.createElement("br",null)))}function l({subcategory:t,color:n,hidden:s=!1}){return React.createElement("div",null,React.createElement("input",{type:"checkbox",className:"btn-check",autoComplete:"off",id:t,onClick:function(){e.updateAlternateSubcategory(t),e.loadCategoryModal()}}),React.createElement("label",{className:`btn btn-outline-${n} w-100 rounded-0 my-1 ${s&&"d-none"}`,htmlFor:t},t,React.createElement("br",null)))}return React.useEffect(()=>{e.loadCategoryModal(),document.getElementById("category-modal").addEventListener("hidden.bs.modal",n)},[n]),React.createElement("div",{className:"modal modal-lg",id:"category-modal",tabIndex:"-1"},React.createElement("div",{className:"modal-dialog modal-dialog-scrollable"},React.createElement("div",{className:"modal-content"},React.createElement("div",{className:"modal-header"},React.createElement("h5",{className:"modal-title me-2"},"Select Categories"),React.createElement(function(){return React.createElement("button",{className:"btn btn-primary me-1",id:"toggle-all",onClick:function(){0===e.categories.length?e.import({categories:s.map(e=>e[0]),subcategories:o.map(e=>e[0]),alternateSubcategories:a.map(e=>e[0])}):e.import(),e.loadCategoryModal()}},"Toggle all")},null),t||React.createElement(function(){return React.createElement("button",{className:"btn btn-primary",onClick:function(){e.percentView=!e.percentView,e.loadCategoryModal()}},"% view")},null),React.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),React.createElement("div",{className:"modal-body"},React.createElement("div",{className:"row",id:"non-percent-view"},React.createElement("div",{className:"col-4",id:"categories"},React.createElement("h5",{className:"text-center"},"Category"),s.map(e=>React.createElement(i,{key:e[0],category:e[0],color:e[1]}))),React.createElement("div",{className:"col-4",id:"subcategories"},React.createElement("h5",{className:"text-center"},"Subcategory"),React.createElement("div",{className:"text-muted text-center",id:"subcategory-info-text"},"You must select categories before you can select subcategories."),o.map(e=>React.createElement(c,{key:e[0],subcategory:e[0],color:e[1],hidden:!0}))),React.createElement("div",{className:"col-4",id:"alternate-subcategories"},React.createElement("h5",{className:"text-center"},"Alternate ",React.createElement("span",{className:"d-none d-lg-inline"},"Subcategory")),a.map(e=>React.createElement(l,{key:e[0],subcategory:e[0],color:e[1],hidden:!0})))),React.createElement("div",{className:"d-none",id:"percent-view"},React.createElement("table",{className:"table"},React.createElement("tbody",null,s.map((e,t)=>React.createElement(r,{key:e[0],category:e[0],index:t})),React.createElement("tr",null,React.createElement("th",null,"Total Percent:"),React.createElement("td",{className:"font-monospace"},React.createElement("span",{className:"me-1"},(e.categoryPercents.reduce((e,t)=>e+t,0)+"").padStart(3," "),"%"),React.createElement("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{e.categoryPercents=e.categoryPercents.map(()=>0),e.loadCategoryModal()}},"Reset"))))))))))}},685:(e,t,n)=>{n.d(t,{A:()=>s});class s{static deleteUsername(){window.sessionStorage.setItem("account-username",JSON.stringify({username:null,expires:null})),document.getElementById("login-link").textContent="Log in",document.getElementById("login-link").href="/user/login"}static async getUsername(){let e;try{e=window.sessionStorage.getItem("account-username"),e=e?JSON.parse(e):{},e=e||{}}catch(t){e={},window.sessionStorage.setItem("account-username",JSON.stringify(e))}let{username:t,expires:n}=e;if(null===t)return null;if(void 0===t){const e=await fetch("/auth/get-username").then(e=>401===e.status?{username:null,expires:null}:e.json());t=e.username,window.sessionStorage.setItem("account-username",JSON.stringify(e))}else(null===n||n<Date.now())&&(t=null,window.sessionStorage.setItem("account-username",JSON.stringify({username:null,expires:null})));return t}static setUsername(e,t){window.sessionStorage.setItem("account-username",JSON.stringify({username:e,expires:t}))}}},756:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(412);function o(e,t,n,o,a){if(!e||!e.userId||!e.username)return void console.error("Player or player.userId or player.username is undefined",{player:e});if("string"!=typeof e.userId||"string"!=typeof e.username)return void console.error("player.userId and player.username must be strings",{player:e});e.userId=(0,s.Zn)(e.userId),e.username=(0,s.Zn)(e.username);const{userId:r,username:i,powers:c=0,tens:l=0,negs:d=0,tuh:u=0,points:m=0,online:g}=e,p=e?.celerity?.correct?.average??e?.celerity??0,h=n===r;document.getElementById("list-group-"+r)&&document.getElementById("list-group-"+r).remove();const y=document.createElement("a");y.className=`list-group-item clickable ${r===t?"user-score":""} ${!1===g&&"offline"}`,y.id=`list-group-${r}`;const b=h&&!a?`👑 ${i}`:i;y.innerHTML=`\n  <div class="d-flex justify-content-between align-items-center">\n      <div class="d-flex align-items-center">\n          <span id="username-${r}" class="me-1">${b}</span>\n          \x3c!-- Dropdown  --\x3e\n      </div>\n      <span><span id="points-${r}" class="badge rounded-pill ${g?"bg-success":"bg-secondary"}">${m}</span></span>\n  </div>\n`,y.setAttribute("data-bs-container","body"),y.setAttribute("data-bs-custom-class","custom-popover"),y.setAttribute("data-bs-html","true"),y.setAttribute("data-bs-placement","left"),y.setAttribute("data-bs-toggle","popover"),y.setAttribute("data-bs-trigger","focus"),y.setAttribute("tabindex","0"),y.setAttribute("data-bs-title",i),y.setAttribute("data-bs-content",`\n    <ul class="list-group list-group-flush">\n        <li class="list-group-item"><span>Powers</span><span id="powers-${r}" class="float-end badge rounded-pill bg-secondary stats-${r}">${c}</span></li>\n        <li class="list-group-item"><span>Tens</span><span id="tens-${r}" class="float-end badge rounded-pill bg-secondary stats-${r}">${l}</span></li>\n        <li class="list-group-item"><span>Negs</span><span id="negs-${r}" class="float-end badge rounded-pill bg-secondary stats-${r}">${d}</span></li>\n        <li class="list-group-item"><span>TUH</span><span id="tuh-${r}" class="float-end badge rounded-pill bg-secondary stats-${r}">${u}</span></li>\n        <li class="list-group-item"><span>Celerity</span><span id="celerity-${r}" class="float-end stats stats-${r}">${p.toFixed(3)}</span></li>\n        <li class="list-group-item"><span>Is Owner?</span><span id="owner-${r}" class="float-end stats stats-${r}">${h?"Yes":"No"}</span></li>\n    </ul>\n  `),document.getElementById("player-list-group").appendChild(y);const E=n===t&&r!==n&&!a&&"ai-bot"!==r,f="ai-bot"!==r&&r!==t&&!a,w=r!==t&&(a||r!==n&&"ai-bot"!==r);if(E||f||w){const t=document.createElement("div");t.className="ms-1";const n=document.createElement("button");n.className="btn btn-default dropdown-toggle py-0 px-1",n.setAttribute("data-bs-toggle","dropdown"),n.setAttribute("type","button"),t.appendChild(n);const s=document.createElement("ul");if(s.className="dropdown-menu",s.setAttribute("aria-labelledby","playerActionsDropdown"),f){const t=document.createElement("li"),n=document.createElement("button");n.textContent="Mute",n.className="btn btn-warning btn-sm mt-2 me-1 dropdown-item",n.title="Mute/Unmute an user to change visibility of what they say in chat.",t.appendChild(n),s.appendChild(t),n.addEventListener("click",()=>{o.send(JSON.stringify({type:"toggle-mute",targetId:r,targetUsername:e.username,muteStatus:n.textContent})),n.textContent="Unmute"===n.textContent?"Mute":"Unmute"})}if(w){const e=document.createElement("li"),t=document.createElement("button");t.className="btn btn-warning btn-sm mt-2 me-1 dropdown-item",t.title="Initiate a votekick on an user. 90 second cooldown.",t.textContent="Votekick",e.appendChild(t),s.appendChild(e),t.addEventListener("click",()=>{o.send(JSON.stringify({type:"votekick-vote",targetId:r})),o.send(JSON.stringify({type:"votekick-init",targetId:r})),t.disabled=!0,t.textContent="Cooldown",setTimeout(()=>{t.disabled=!1,t.textContent="VK"},9e4)})}if(E){const e=document.createElement("li"),t=document.createElement("button");t.className="btn btn-danger btn-sm mt-2 me-1 dropdown-item",t.title="Ban an user. They can no longer join the room.",t.textContent="Ban",e.appendChild(t),s.appendChild(e),t.addEventListener("click",()=>{o.send(JSON.stringify({type:"ban",targetId:r,targetUsername:i}))})}t.appendChild(s);const a=y.querySelector(`#username-${r}`);a.classList.add("me-2"),a.after(t)}new bootstrap.Popover(y)}},828:(e,t,n)=>{function s(e){const t=[];return Array.from(document.getElementById(e).children).forEach(e=>{const n=e.querySelector("input");n.checked&&t.push(parseInt(n.value))}),t}n.d(t,{cl:()=>s})},837:(e,t,n)=>{n.d(t,{d2:()=>a,jG:()=>o,mT:()=>r,zN:()=>s});const s=2e3,o=2010,a=2025,r=Object.freeze({SET_NAME:"select by set name",RANDOM:"random questions",STARRED:"starred questions",LOCAL:"local packet"});Object.freeze({NOT_STARTED:0,READING:1,LAST_PART_REVEALED:2}),Object.freeze({NOT_STARTED:0,READING:1,ANSWER_REVEALED:2})},862:(e,t,n)=>{n.d(t,{R6:()=>o,_h:()=>s,j:()=>a});const s={Literature:["American Literature","British Literature","Classical Literature","European Literature","World Literature","Other Literature"],History:["American History","Ancient History","European History","World History","Other History"],Science:["Biology","Chemistry","Physics","Other Science"],"Fine Arts":["Visual Fine Arts","Auditory Fine Arts","Other Fine Arts"],Religion:["Religion"],Mythology:["Mythology"],Philosophy:["Philosophy"],"Social Science":["Social Science"],"Current Events":["Current Events"],Geography:["Geography"],"Other Academic":["Other Academic"],"Pop Culture":["Movies","Music","Sports","Television","Video Games","Other Pop Culture"]},o=Object.keys(s),a={Literature:["Drama","Long Fiction","Poetry","Short Fiction","Misc Literature"],History:[],Science:["Math","Astronomy","Computer Science","Earth Science","Engineering","Misc Science"],"Fine Arts":["Architecture","Dance","Film","Jazz","Musicals","Opera","Photography","Misc Arts"],Religion:[],Mythology:[],Philosophy:[],"Social Science":["Anthropology","Economics","Linguistics","Psychology","Sociology","Other Social Science"],"Current Events":[],Geography:[],"Other Academic":[],"Pop Culture":[]};Object.keys({"American Literature":"Literature","British Literature":"Literature","Classical Literature":"Literature","European Literature":"Literature","World Literature":"Literature","Other Literature":"Literature","American History":"History","Ancient History":"History","European History":"History","World History":"History","Other History":"History",Biology:"Science",Chemistry:"Science",Physics:"Science","Other Science":"Science","Visual Fine Arts":"Fine Arts","Auditory Fine Arts":"Fine Arts","Other Fine Arts":"Fine Arts",Religion:"Religion",Mythology:"Mythology",Philosophy:"Philosophy","Social Science":"Social Science","Current Events":"Current Events",Geography:"Geography","Other Academic":"Other Academic",Movies:"Pop Culture",Music:"Pop Culture",Sports:"Pop Culture",Television:"Pop Culture","Video Games":"Pop Culture","Other Pop Culture":"Pop Culture"}),Object.keys({Drama:"Literature","Long Fiction":"Literature",Poetry:"Literature","Short Fiction":"Literature","Misc Literature":"Literature",Math:"Science",Astronomy:"Science","Computer Science":"Science","Earth Science":"Science",Engineering:"Science","Misc Science":"Science",Architecture:"Fine Arts",Dance:"Fine Arts",Film:"Fine Arts",Jazz:"Fine Arts",Musicals:"Fine Arts",Opera:"Fine Arts",Photography:"Fine Arts","Misc Arts":"Fine Arts",Anthropology:"Social Science",Economics:"Social Science",Linguistics:"Social Science",Psychology:"Social Science",Sociology:"Social Science","Other Social Science":"Social Science"})},871:(e,t,n)=>{n.a(e,async(e,t)=>{try{var s=n(984),o=n(828),a=n(994),r=n(649),i=n(18),c=n(837),l=n(512),d=n(380),u=n(283),m=e([l]);l=(m.then?(await m)():m)[0];const g={categoryManager:new s.A,difficulties:[],mode:c.mT.RANDOM,muteList:[],ownerId:"",players:{},public:!0,setLength:24,showingOffline:!1,tossup:{},username:window.localStorage.getItem("multiplayer-username")||(0,d.A)()};let p=JSON.stringify(g.categoryManager.export());const h=decodeURIComponent(window.location.pathname.substring(13)),y=window.localStorage.getItem("USER_ID")||"unknown",b=new window.WebSocket(window.location.href.replace("http","ws").split("?")[0]+"?"+new URLSearchParams({...Object.fromEntries(new URLSearchParams(window.location.search)),roomName:h,userId:y,username:g.username}).toString());window.history.pushState({},"","/multiplayer/"+encodeURIComponent(h));const E=setInterval(()=>b.send(JSON.stringify({type:"ping"})),3e4);b.onclose=function(e){const{code:t}=e;3e3!==t&&window.alert("Disconnected from server"),clearInterval(E)};const f=new l.A(g,y,b);b.onmessage=e=>{f.onmessage(e)},document.getElementById("answer-form").addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation();const t=document.getElementById("answer-input").value;b.send(JSON.stringify({type:"give-answer",givenAnswer:t}))}),document.getElementById("answer-input").addEventListener("input",function(){b.send(JSON.stringify({type:"give-answer-live-update",givenAnswer:this.value}))}),document.getElementById("buzz").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"buzz"})),b.send(JSON.stringify({type:"give-answer-live-update",givenAnswer:""}))}),document.getElementById("chat").addEventListener("click",function(){this.blur(),document.getElementById("chat-input-group").classList.remove("d-none"),document.getElementById("chat-input").focus(),b.send(JSON.stringify({type:"chat-live-update",message:""}))}),document.getElementById("chat-form").addEventListener("submit",function(e){e.preventDefault(),e.stopPropagation();const t=document.getElementById("chat-input").value;document.getElementById("chat-input").value="",document.getElementById("chat-input-group").classList.add("d-none"),document.getElementById("chat-input").blur(),b.send(JSON.stringify({type:"chat",message:t}))}),document.getElementById("chat-input").addEventListener("input",function(){b.send(JSON.stringify({type:"chat-live-update",message:this.value}))}),document.getElementById("clear-stats").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"clear-stats"}))}),document.getElementById("next").addEventListener("click",function(){switch(this.blur(),this.innerHTML){case"Start":b.send(JSON.stringify({type:"start"}));break;case"Next":b.send(JSON.stringify({type:"next"}))}}),document.getElementById("skip").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"skip"}))}),document.getElementById("packet-number").addEventListener("change",function(){const e=(0,a.A)(this.value,g.setLength);e.some(e=>e<1||e>g.setLength)?document.getElementById("packet-number").classList.add("is-invalid"):(document.getElementById("packet-number").classList.remove("is-invalid"),b.send(JSON.stringify({type:"set-packet-numbers",packetNumbers:e})))}),document.getElementById("pause").addEventListener("click",function(){this.blur();const e=10*(parseFloat(document.querySelector(".timer .face").textContent)+parseFloat(document.querySelector(".timer .fraction").textContent));b.send(JSON.stringify({type:"pause",pausedTime:e}))}),document.getElementById("reading-speed").addEventListener("change",function(){b.send(JSON.stringify({type:"set-reading-speed",readingSpeed:this.value}))}),document.getElementById("reading-speed").addEventListener("input",function(){document.getElementById("reading-speed-display").textContent=this.value}),document.getElementById("report-question-submit").addEventListener("click",function(){(0,u.A)(document.getElementById("report-question-id").value,document.getElementById("report-question-reason").value,document.getElementById("report-question-description").value)}),document.getElementById("set-name").addEventListener("change",async function(){b.send(JSON.stringify({type:"set-set-name",setName:this.value}))}),document.getElementById("set-strictness").addEventListener("change",function(){this.blur(),b.send(JSON.stringify({type:"set-strictness",strictness:this.value}))}),document.getElementById("set-strictness").addEventListener("input",function(){document.getElementById("strictness-display").textContent=this.value});const w=document.createElement("style");w.textContent=g.showingOffline?"":".offline { display: none; }",document.head.appendChild(w),document.getElementById("toggle-offline-players").addEventListener("click",function(){g.showingOffline=this.checked,this.blur(),g.showingOffline?w.textContent="":w.textContent=".offline { display: none; }"}),document.getElementById("toggle-controlled").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-controlled",controlled:this.checked}))}),document.getElementById("toggle-lock").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-lock",lock:this.checked}))}),document.getElementById("toggle-login-required").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-login-required",loginRequired:this.checked}))}),document.getElementById("toggle-powermark-only").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-powermark-only",powermarkOnly:this.checked}))}),document.getElementById("toggle-rebuzz").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-rebuzz",rebuzz:this.checked}))}),document.getElementById("toggle-skip").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-skip",skip:this.checked}))}),document.getElementById("set-mode").addEventListener("change",function(){this.blur(),b.send(JSON.stringify({type:"set-mode",setName:document.getElementById("set-name").value,mode:this.value}))}),document.getElementById("toggle-settings").addEventListener("click",function(){this.blur(),document.getElementById("buttons").classList.toggle("col-lg-9"),document.getElementById("buttons").classList.toggle("col-lg-12"),document.getElementById("content").classList.toggle("col-lg-9"),document.getElementById("content").classList.toggle("col-lg-12"),document.getElementById("settings").classList.toggle("d-none"),document.getElementById("settings").classList.toggle("d-lg-none")}),document.getElementById("toggle-standard-only").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-standard-only",standardOnly:this.checked}))}),document.getElementById("toggle-timer").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-timer",timer:this.checked}))}),document.getElementById("toggle-public").addEventListener("click",function(){this.blur(),b.send(JSON.stringify({type:"toggle-public",public:this.checked}))}),document.getElementById("username").addEventListener("change",function(){b.send(JSON.stringify({type:"set-username",userId:y,username:this.value})),g.username=this.value,window.localStorage.setItem("multiplayer-username",g.username)}),document.getElementById("year-range-a").onchange=function(){const[e,t]=$("#slider").slider("values");t<e?document.querySelector("#yearRangeAlert").style.display="":(document.querySelector("#yearRangeAlert").style.display="none",b.send(JSON.stringify({type:"set-year-range",minYear:e,maxYear:t})))},document.addEventListener("keydown",e=>{if("Escape"===e.key&&"chat-input"===document.activeElement.id&&(document.getElementById("chat-input").value="",document.getElementById("chat-input-group").classList.add("d-none"),document.getElementById("chat-input").blur(),b.send(JSON.stringify({type:"chat",message:""}))),!["INPUT","TEXTAREA","SELECT"].includes(document.activeElement.tagName))switch(e.key?.toLowerCase()){case" ":document.getElementById("buzz").click(),e.target===document.body&&e.preventDefault();break;case"e":return document.getElementById("toggle-settings").click();case"k":return document.getElementsByClassName("card-header-clickable")[0].click();case"p":return document.getElementById("pause").click();case"t":return document.getElementsByClassName("star-tossup")[0].click();case"y":return navigator.clipboard.writeText(g.tossup._id??"");case"n":case"s":document.getElementById("next").click(),document.getElementById("skip").click()}}),document.addEventListener("keypress",function(e){"Enter"===e.key&&e.target===document.body&&document.getElementById("chat").click()}),document.getElementById("username").value=g.username,ReactDOM.createRoot(document.getElementById("category-modal-root")).render(React.createElement(r.A,{categoryManager:g.categoryManager,onClose:()=>{p!==JSON.stringify(g.categoryManager.export())&&b.send(JSON.stringify({type:"set-categories",...g.categoryManager.export()})),p=JSON.stringify(g.categoryManager.export())}})),ReactDOM.createRoot(document.getElementById("difficulty-dropdown-root")).render(React.createElement(i.A,{startingDifficulties:g.difficulties,onChange:()=>b.send(JSON.stringify({type:"set-difficulties",difficulties:(0,o.cl)("difficulties")}))})),t()}catch(e){t(e)}})},984:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(862);class o{constructor(e=[],t=[],n=[]){this.import({categories:e,subcategories:t,alternateSubcategories:n})}export(){return{categories:this.categories,subcategories:this.subcategories,alternateSubcategories:this.alternateSubcategories,percentView:this.percentView,categoryPercents:this.categoryPercents}}import({categories:e=[],subcategories:t=[],alternateSubcategories:n=[],percentView:o=!1,categoryPercents:a}={}){if(!a){a=[];for(let e=0;e<s.R6.length;e++)a.push(0)}e.length>0&&0===t.length&&e.forEach(e=>{s._h[e].forEach(e=>{t.push(e)})}),this.categories=e,this.subcategories=t,this.alternateSubcategories=n,this.percentView=o,this.categoryPercents=a}getRandomCategory(){const e=this.categoryPercents.reduce((e,t)=>e+t,0);if(0===e)return s.R6[Math.floor(Math.random()*s.R6.length)];let t=Math.random()*e;for(let e=0;e<this.categoryPercents.length;e++)if(t-=this.categoryPercents[e],t<=0)return s.R6[e]}isValidCategory(e){if(0===this.categories.length&&0===this.subcategories.length)return!0;const t=!e.alternate_subcategory||this.alternateSubcategories.length>0&&this.alternateSubcategories.includes(e.alternate_subcategory);return this.categories.includes(e.category)&&this.subcategories.includes(e.subcategory)&&t}loadCategoryModal(){document.querySelectorAll("#categories input").forEach(e=>{e.checked=!1}),document.querySelectorAll("#subcategories input").forEach(e=>{e.checked=!1}),document.querySelectorAll("#subcategories label").forEach(e=>{e.classList.add("d-none")}),document.querySelectorAll("#alternate-subcategories input").forEach(e=>{e.checked=!1}),document.querySelectorAll("#alternate-subcategories label").forEach(e=>{e.classList.add("d-none")}),document.getElementById("subcategory-info-text").classList.toggle("d-none",this.categories.length||this.subcategories.length);for(const e of this.categories){document.getElementById(e).checked=!0;for(const t of s._h[e])document.querySelector(`[for="${t}"]`).classList.remove("d-none");for(const t of s.j[e])document.querySelector(`[for="${t}"]`).classList.remove("d-none")}for(const e of this.subcategories)document.getElementById(e).checked=!0;for(const e of this.alternateSubcategories)document.getElementById(e).checked=!0;document.getElementById("non-percent-view").className=this.percentView?"d-none":"row",document.getElementById("percent-view").className=this.percentView?"":"d-none",document.getElementById("toggle-all").disabled=this.percentView;const e=document.querySelectorAll(".category-percent");for(let t=0;t<this.categoryPercents.length;t++)e.item(t).textContent=String(this.categoryPercents[t]).padStart(3," ")+"%"}updateCategory(e){return this.categories.includes(e)?(this.categories=this.categories.filter(t=>t!==e),this.subcategories=this.subcategories.filter(t=>!s._h[e].includes(t)),this.alternateSubcategories=this.alternateSubcategories.filter(t=>!s.j[e].includes(t)),!1):(this.categories.push(e),this.subcategories=this.subcategories.concat(s._h[e]),this.alternateSubcategories=this.alternateSubcategories.concat(s.j[e]),!0)}updateSubcategory(e){return this.subcategories.includes(e)?(this.subcategories=this.subcategories.filter(t=>t!==e),!1):(this.subcategories.push(e),!0)}updateAlternateSubcategory(e){return this.alternateSubcategories.includes(e)?(this.alternateSubcategories=this.alternateSubcategories.filter(t=>t!==e),!1):(this.alternateSubcategories.push(e),!0)}}},994:(e,t,n)=>{function s(e){if(0===e.length)return"";let t="",n=(e=(e=[...new Set(e)]).sort((e,t)=>e-t))[0],s=e[0];for(let o=1;o<e.length;o++)e[o]-s===1||(t=n===s?`${t}, ${n}`:`${t}, ${n}-${s}`,n=e[o]),s=e[o];return t=n===s?`${t}, ${n}`:`${t}, ${n}-${s}`,t.slice(2)}function o(e,t=0){0===e.length&&(e=`1-${t}`),e.endsWith("-")&&(e+=t);const n=e.split(","),s=[];for(let e=0;e<n.length;e++){const t=n[e].trim().split("-");1===t.length?s.push([parseInt(t[0]),parseInt(t[0])]):s.push([parseInt(t[0]),parseInt(t[1])])}const o=[];for(let e=0;e<s.length;e++)for(let t=s[e][0];t<=s[e][1];t++)o.push(t);return o}n.d(t,{A:()=>o,w:()=>s})}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return a[e](n,n.exports,i),n.exports}e="function"==typeof Symbol,t=e?Symbol("webpack queues"):"__webpack_queues__",n=e?Symbol("webpack exports"):"__webpack_exports__",s=e?Symbol("webpack error"):"__webpack_error__",o=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},i.a=(e,a,r)=>{var i;r&&((i=[]).d=-1);var c,l,d,u=new Set,m=e.exports,g=new Promise((e,t)=>{d=t,l=e});g[n]=m,g[t]=e=>(i&&e(i),u.forEach(e),g.catch(e=>{})),e.exports=g,a(e=>{var a;c=(e=>e.map(e=>{if(null!==e&&"object"==typeof e){if(e[t])return e;if(e.then){var a=[];a.d=0,e.then(e=>{r[n]=e,o(a)},e=>{r[s]=e,o(a)});var r={};return r[t]=e=>e(a),r}}var i={};return i[t]=e=>{},i[n]=e,i}))(e);var r=()=>c.map(e=>{if(e[s])throw e[s];return e[n]}),l=new Promise(e=>{(a=()=>e(r)).r=0;var n=e=>e!==i&&!u.has(e)&&(u.add(e),e&&!e.d&&(a.r++,e.push(a)));c.map(e=>e[t](n))});return a.r?l:r()},e=>(e?d(g[s]=e):l(m),o(i))),i&&i.d<0&&(i.d=0)},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(871);